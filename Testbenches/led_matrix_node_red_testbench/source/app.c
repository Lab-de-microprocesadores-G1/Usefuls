/********************************************************************************
  @file     App.c
  @brief    Application functions
  @author   N. Magliola, G. Davidov, F. Farall, J. Gayt√°n, L. Kammann, N. Trozzo
 *******************************************************************************/

/*******************************************************************************
 * INCLUDE HEADER FILES
 ******************************************************************************/
#define DEBUG_MODE
#include "drivers/HAL/WS2812/WS2812.h"
#include "drivers/HAL/node_red/node_red.h"

/*******************************************************************************
 * CONSTANT AND MACRO DEFINITIONS USING #DEFINE
 ******************************************************************************/

#define DISPLAY_ROW_SIZE    8
#define DISPLAY_COL_SIZE    8
#define DISPLAY_SIZE        DISPLAY_ROW_SIZE * DISPLAY_COL_SIZE

/*******************************************************************************
 * FUNCTION PROTOTYPES FOR PRIVATE FUNCTIONS WITH FILE LEVEL SCOPE
 ******************************************************************************/


/*******************************************************************************
 * VARIABLES TYPES DEFINITIONS
 ******************************************************************************/

// typedef int  my_int_t;

/*******************************************************************************
 * PRIVATE VARIABLES WITH FILE LEVEL SCOPE
 ******************************************************************************/

static pixel_t display[DISPLAY_SIZE];

static protocol_packet_t receiveColour;


/*******************************************************************************
 *******************************************************************************
                        GLOBAL FUNCTION DEFINITIONS
 *******************************************************************************
 ******************************************************************************/

/* Called once at the beginning of the program */
void appInit (void)
{
    WS2812Init();

    WS2812SetDisplayBuffer(display, DISPLAY_SIZE);    

    nodeRedInit();
}

/* Called repeatedly in an infinite loop */
void appRun (void)
{
	if (nodeRedHasNewValue())
	{
		receiveColour = nodeRedGetValue();
	}
}

/*******************************************************************************
 *******************************************************************************
                        LOCAL FUNCTION DEFINITIONS
 *******************************************************************************
 ******************************************************************************/


/*******************************************************************************
 ******************************************************************************/
